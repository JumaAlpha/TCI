<!-- Gallery Section -->
<section class="gallery-section">
    <div class="gallery-particles" id="galleryParticles"></div>
    <h2 class="gallery-title">Our Gallery</h2>
    
    <!-- Carousel Container -->
    <div class="gallery-carousel-container">
        <!-- Carousel Wrapper -->
        <div class="gallery-carousel">
            <!-- Image 1 -->
            <div class="gallery-carousel-item" data-index="0">
                <div class="carousel-image-container">
                    <img src="https://images.unsplash.com/photo-1489599809516-9827b6d1cf13?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
                         alt="Cinematic Excellence" 
                         class="carousel-img">
                    <div class="carousel-text-overlay">
                        <h3 class="carousel-caption">Cinematic Excellence</h3>
                        <p class="carousel-subtitle">Mastering visual storytelling with precision and artistry</p>
                    </div>
                </div>
            </div>

            <!-- Image 2 -->
            <div class="gallery-carousel-item" data-index="1">
                <div class="carousel-image-container">
                    <img src="https://images.unsplash.com/photo-1554048612-b6a482bc67e5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
                         alt="Visual Innovation" 
                         class="carousel-img">
                    <div class="carousel-text-overlay">
                        <h3 class="carousel-caption">Visual Innovation</h3>
                        <p class="carousel-subtitle">Pushing creative boundaries with cutting-edge techniques</p>
                    </div>
                </div>
            </div>

            <!-- Image 3 -->
            <div class="gallery-carousel-item" data-index="2">
                <div class="carousel-image-container">
                    <img src="https://images.unsplash.com/photo-1516035069371-29a1b244cc32?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
                         alt="Dynamic Storytelling" 
                         class="carousel-img">
                    <div class="carousel-text-overlay">
                        <h3 class="carousel-caption">Dynamic Storytelling</h3>
                        <p class="carousel-subtitle">Emotion through imagery that captivates and inspires</p>
                    </div>
                </div>
            </div>

            <!-- Image 4 -->
            <div class="gallery-carousel-item" data-index="3">
                <div class="carousel-image-container">
                    <img src="https://images.unsplash.com/photo-1499092346589-b9b6be3e94b2?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
                         alt="Technical Mastery" 
                         class="carousel-img">
                    <div class="carousel-text-overlay">
                        <h3 class="carousel-caption">Technical Mastery</h3>
                        <p class="carousel-subtitle">Precision in every frame, detail in every scene</p>
                    </div>
                </div>
            </div>

            <!-- Image 5 -->
            <div class="gallery-carousel-item" data-index="4">
                <div class="carousel-image-container">
                    <img src="https://images.unsplash.com/photo-1538481199705-c710c4e965fc?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
                         alt="Artistic Vision" 
                         class="carousel-img">
                    <div class="carousel-text-overlay">
                        <h3 class="carousel-caption">Artistic Vision</h3>
                        <p class="carousel-subtitle">Creative direction and style that defines cinematic beauty</p>
                    </div>
                </div>
            </div>

            <!-- Image 6 -->
            <div class="gallery-carousel-item" data-index="5">
                <div class="carousel-image-container">
                    <img src="https://images.unsplash.com/photo-1533105079780-92b9be482077?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80" 
                         alt="Immersive Experience" 
                         class="carousel-img">
                    <div class="carousel-text-overlay">
                        <h3 class="carousel-caption">Immersive Experience</h3>
                        <p class="carousel-subtitle">Engaging audiences deeply through sensory storytelling</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Navigation Dots -->
        <div class="carousel-dots">
            <div class="carousel-dot active" data-index="0"></div>
            <div class="carousel-dot" data-index="1"></div>
            <div class="carousel-dot" data-index="2"></div>
            <div class="carousel-dot" data-index="3"></div>
            <div class="carousel-dot" data-index="4"></div>
            <div class="carousel-dot" data-index="5"></div>
        </div>
        
        <!-- Navigation Arrows -->
        <button class="carousel-arrow carousel-arrow-prev" aria-label="Previous image">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 18l-6-6 6-6"/>
            </svg>
        </button>
        <button class="carousel-arrow carousel-arrow-next" aria-label="Next image">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6"/>
            </svg>
        </button>
    </div>
    
    <!-- Scroll Hint -->
    <div class="carousel-scroll-hint">
        <span>← Scroll horizontally →</span>
        <div class="scroll-hint-arrow">↔</div>
    </div>
</section>

<style>
/* GALLERY SECTION WITH HORIZONTAL CAROUSEL */
.gallery-section {
    position: absolute;
    top: 300vh;
    left: 0;
    width: 100%;
    min-height: 100vh;
    background: #000;
    z-index: 3;
    padding: 80px 20px;
    overflow: hidden;
    transition: opacity 1s ease;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.gallery-title {
    font-size: clamp(3rem, 8vw, 6rem);
    font-weight: 900;
    color: var(--lime-green);
    text-align: center;
    margin-bottom: 60px;
    opacity: 0;
    transform: translateY(30px);
    transition: all 1s ease 0.3s;
    position: relative;
    z-index: 1;
}

.gallery-title.visible {
    opacity: 1;
    transform: translateY(0);
}

/* Carousel Container */
.gallery-carousel-container {
    position: relative;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
    overflow: visible;
    padding: 0 60px;
}

/* Carousel Track */
.gallery-carousel {
    display: flex;
    gap: 30px;
    scroll-behavior: smooth;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    padding: 20px 0 40px;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
    cursor: grab;
}

.gallery-carousel::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
}

.gallery-carousel.dragging {
    scroll-behavior: auto;
    cursor: grabbing;
}

/* Carousel Items */
.gallery-carousel-item {
    flex: 0 0 calc(33.333% - 20px);
    scroll-snap-align: start;
    min-height: 500px;
    opacity: 0.4;
    transform: scale(0.95);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
}

.gallery-carousel-item.active {
    opacity: 1;
    transform: scale(1);
    z-index: 2;
}

.gallery-carousel-item:hover {
    transform: scale(1.02);
}

.carousel-image-container {
    position: relative;
    width: 100%;
    height: 100%;
    min-height: 500px;
    overflow: hidden;
    border-radius: 20px;
}

.carousel-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.8s ease;
}

.gallery-carousel-item:hover .carousel-img {
    transform: scale(1.1);
}

/* Overlay */
.carousel-text-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 40px 30px;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.95), transparent);
    color: var(--white);
    transform: translateY(20px);
    opacity: 0;
    transition: all 0.6s ease;
}

.gallery-carousel-item.active .carousel-text-overlay,
.gallery-carousel-item:hover .carousel-text-overlay {
    opacity: 1;
    transform: translateY(0);
}

.carousel-caption {
    font-size: 2rem;
    font-weight: 900;
    margin-bottom: 10px;
    color: var(--lime-green);
    text-transform: uppercase;
    letter-spacing: 2px;
}

.carousel-subtitle {
    font-size: 1.1rem;
    opacity: 0.9;
    line-height: 1.4;
    max-width: 80%;
}

/* Navigation Dots */
.carousel-dots {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 40px;
    z-index: 10;
    position: relative;
}

.carousel-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
}

.carousel-dot.active {
    background: var(--lime-green);
    transform: scale(1.3);
    border-color: var(--orange);
    box-shadow: 0 0 20px rgba(50, 205, 50, 0.5);
}

.carousel-dot:hover {
    background: var(--orange);
    transform: scale(1.2);
}

/* Navigation Arrows */
.carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 60px;
    height: 60px;
    background: rgba(0, 0, 0, 0.7);
    border: 2px solid var(--lime-green);
    border-radius: 50%;
    color: var(--lime-green);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 10;
    opacity: 0.7;
}

.carousel-arrow:hover {
    background: var(--lime-green);
    color: #000;
    transform: translateY(-50%) scale(1.1);
    opacity: 1;
}

.carousel-arrow-prev {
    left: 0;
}

.carousel-arrow-next {
    right: 0;
}

.carousel-arrow svg {
    width: 24px;
    height: 24px;
}

/* Scroll Hint */
.carousel-scroll-hint {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    margin-top: 40px;
    color: var(--orange);
    font-size: 14px;
    letter-spacing: 2px;
    text-transform: uppercase;
    opacity: 0.8;
    animation: pulseHint 2s infinite;
}

.scroll-hint-arrow {
    font-size: 24px;
    animation: bounceHorizontal 1.5s infinite;
}

@keyframes bounceHorizontal {
    0%, 100% { 
        transform: translateX(-5px);
    }
    50% { 
        transform: translateX(5px);
    }
}

@keyframes pulseHint {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 1; }
}

/* Responsive Design */
@media (max-width: 1200px) {
    .gallery-carousel-item {
        flex: 0 0 calc(50% - 15px);
        min-height: 450px;
    }
    
    .carousel-caption {
        font-size: 1.8rem;
    }
}

@media (max-width: 768px) {
    .gallery-section {
        padding: 60px 15px;
    }
    
    .gallery-carousel-container {
        padding: 0 50px;
    }
    
    .gallery-carousel {
        gap: 20px;
        padding-bottom: 30px;
    }
    
    .gallery-carousel-item {
        flex: 0 0 calc(100% - 40px);
        min-height: 400px;
    }
    
    .carousel-image-container {
        min-height: 400px;
    }
    
    .carousel-caption {
        font-size: 1.6rem;
    }
    
    .carousel-subtitle {
        font-size: 1rem;
    }
    
    .carousel-arrow {
        width: 50px;
        height: 50px;
    }
    
    .carousel-scroll-hint {
        font-size: 12px;
        margin-top: 30px;
    }
}

@media (max-width: 480px) {
    .gallery-section {
        padding: 40px 10px;
    }
    
    .gallery-carousel-container {
        padding: 0 40px;
    }
    
    .gallery-carousel {
        gap: 15px;
    }
    
    .gallery-carousel-item {
        flex: 0 0 calc(100% - 30px);
        min-height: 350px;
    }
    
    .carousel-image-container {
        min-height: 350px;
    }
    
    .carousel-caption {
        font-size: 1.4rem;
        padding: 0 20px;
    }
    
    .carousel-text-overlay {
        padding: 30px 20px;
    }
    
    .carousel-arrow {
        width: 40px;
        height: 40px;
    }
    
    .carousel-arrow svg {
        width: 20px;
        height: 20px;
    }
}
</style>

<script>
// Gallery Carousel Functionality
(function() {
    'use strict';
    
    document.addEventListener('DOMContentLoaded', function() {
        // Wait for gallery to be loaded
        setTimeout(initCarousel, 100);
    });
    
    function initCarousel() {
        // Elements
        const carousel = document.querySelector('.gallery-carousel');
        const carouselItems = document.querySelectorAll('.gallery-carousel-item');
        const dots = document.querySelectorAll('.carousel-dot');
        const prevBtn = document.querySelector('.carousel-arrow-prev');
        const nextBtn = document.querySelector('.carousel-arrow-next');
        const galleryTitle = document.querySelector('.gallery-title');
        
        if (!carousel) return;
        
        // State
        let currentIndex = 0;
        let isDragging = false;
        let startX = 0;
        let scrollLeft = 0;
        let autoScrollInterval;
        let galleryShown = false;
        
        // Initialize
        setupCarousel();
        
        function setupCarousel() {
            // Set first item as active
            updateActiveItem(0);
            
            // Add event listeners
            addEventListeners();
            
            // Start auto scroll
            startAutoScroll();
            
            // Set up scroll detection for animation
            setupScrollDetection();
        }
        
        function addEventListeners() {
            // Navigation dots
            dots.forEach(dot => {
                dot.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    goToSlide(index);
                });
            });
            
            // Navigation arrows
            if (prevBtn) {
                prevBtn.addEventListener('click', () => goToSlide(currentIndex - 1));
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', () => goToSlide(currentIndex + 1));
            }
            
            // Mouse drag for desktop
            carousel.addEventListener('mousedown', startDrag);
            carousel.addEventListener('mousemove', drag);
            carousel.addEventListener('mouseup', endDrag);
            carousel.addEventListener('mouseleave', endDrag);
            
            // Touch events for mobile
            carousel.addEventListener('touchstart', startDragTouch);
            carousel.addEventListener('touchmove', dragTouch);
            carousel.addEventListener('touchend', endDrag);
            
            // Wheel scrolling
            carousel.addEventListener('wheel', handleWheel);
            
            // Keyboard navigation
            document.addEventListener('keydown', handleKeydown);
            
            // Pause auto scroll on hover
            carousel.addEventListener('mouseenter', pauseAutoScroll);
            carousel.addEventListener('mouseleave', resumeAutoScroll);
        }
        
        function startDrag(e) {
            isDragging = true;
            carousel.classList.add('dragging');
            startX = e.pageX - carousel.offsetLeft;
            scrollLeft = carousel.scrollLeft;
            pauseAutoScroll();
        }
        
        function drag(e) {
            if (!isDragging) return;
            e.preventDefault();
            const x = e.pageX - carousel.offsetLeft;
            const walk = (x - startX) * 2;
            carousel.scrollLeft = scrollLeft - walk;
            updateActiveFromScroll();
        }
        
        function startDragTouch(e) {
            isDragging = true;
            carousel.classList.add('dragging');
            startX = e.touches[0].pageX - carousel.offsetLeft;
            scrollLeft = carousel.scrollLeft;
            pauseAutoScroll();
        }
        
        function dragTouch(e) {
            if (!isDragging) return;
            const x = e.touches[0].pageX - carousel.offsetLeft;
            const walk = (x - startX) * 2;
            carousel.scrollLeft = scrollLeft - walk;
            updateActiveFromScroll();
        }
        
        function endDrag() {
            isDragging = false;
            carousel.classList.remove('dragging');
            snapToNearestSlide();
            resumeAutoScroll();
        }
        
        function handleWheel(e) {
            // Prevent vertical scrolling
            if (Math.abs(e.deltaX) < Math.abs(e.deltaY)) {
                e.preventDefault();
            }
            
            // Smooth horizontal scrolling with wheel
            carousel.scrollLeft += e.deltaY * 0.5;
            updateActiveFromScroll();
            
            // Pause auto scroll on manual wheel scroll
            pauseAutoScroll();
            setTimeout(resumeAutoScroll, 3000);
        }
        
        function handleKeydown(e) {
            if (e.key === 'ArrowLeft') {
                e.preventDefault();
                goToSlide(currentIndex - 1);
            } else if (e.key === 'ArrowRight') {
                e.preventDefault();
                goToSlide(currentIndex + 1);
            }
        }
        
        function goToSlide(index) {
            if (index < 0) index = carouselItems.length - 1;
            if (index >= carouselItems.length) index = 0;
            
            currentIndex = index;
            
            // Scroll to the slide
            const itemWidth = carouselItems[0].offsetWidth + 30; // width + gap
            carousel.scrollLeft = itemWidth * index;
            
            // Update active item
            updateActiveItem(index);
            
            // Reset auto scroll timer
            resetAutoScroll();
        }
        
        function updateActiveFromScroll() {
            const scrollPosition = carousel.scrollLeft;
            const itemWidth = carouselItems[0].offsetWidth + 30;
            const newIndex = Math.round(scrollPosition / itemWidth);
            
            if (newIndex !== currentIndex) {
                currentIndex = Math.max(0, Math.min(newIndex, carouselItems.length - 1));
                updateActiveItem(currentIndex);
            }
        }
        
        function snapToNearestSlide() {
            const scrollPosition = carousel.scrollLeft;
            const itemWidth = carouselItems[0].offsetWidth + 30;
            const newIndex = Math.round(scrollPosition / itemWidth);
            
            goToSlide(newIndex);
        }
        
        function updateActiveItem(index) {
            // Remove active class from all items
            carouselItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Add active class to current item
            if (carouselItems[index]) {
                carouselItems[index].classList.add('active');
            }
            
            // Update dots
            dots.forEach(dot => {
                dot.classList.remove('active');
                if (parseInt(dot.getAttribute('data-index')) === index) {
                    dot.classList.add('active');
                }
            });
        }
        
        function startAutoScroll() {
            autoScrollInterval = setInterval(() => {
                goToSlide(currentIndex + 1);
            }, 5000); // Change slide every 5 seconds
        }
        
        function pauseAutoScroll() {
            clearInterval(autoScrollInterval);
        }
        
        function resumeAutoScroll() {
            clearInterval(autoScrollInterval);
            startAutoScroll();
        }
        
        function resetAutoScroll() {
            pauseAutoScroll();
            resumeAutoScroll();
        }
        
        function setupScrollDetection() {
            let ticking = false;
            let lastScrollY = window.pageYOffset || document.documentElement.scrollTop;
            
            function checkScroll() {
                const scrollY = window.pageYOffset || document.documentElement.scrollTop;
                const heroHeight = window.innerHeight;
                const galleryProgress = Math.min(Math.max((scrollY - heroHeight * 2.5) / (heroHeight * 0.5), 0), 1);
                
                // Show gallery title
                if (galleryProgress > 0.2 && !galleryShown) {
                    galleryShown = true;
                    galleryTitle.classList.add('visible');
                    
                    // Start carousel animation
                    setTimeout(() => {
                        carouselItems.forEach((item, index) => {
                            item.style.transitionDelay = `${index * 0.1}s`;
                            item.style.opacity = '0.4';
                            item.style.transform = 'scale(0.95)';
                            
                            setTimeout(() => {
                                item.style.opacity = '';
                                item.style.transform = '';
                                if (index === 0) item.classList.add('active');
                            }, 300 + (index * 100));
                        });
                    }, 300);
                } else if (galleryProgress <= 0.2 && galleryShown) {
                    galleryShown = false;
                    galleryTitle.classList.remove('visible');
                }
                
                lastScrollY = scrollY;
                ticking = false;
            }
            
            window.addEventListener('scroll', function() {
                if (!ticking) {
                    window.requestAnimationFrame(checkScroll);
                    ticking = true;
                }
            });
            
            // Initial check
            checkScroll();
        }
        
        // Cleanup
        function cleanup() {
            clearInterval(autoScrollInterval);
            carousel.removeEventListener('mousedown', startDrag);
            carousel.removeEventListener('mousemove', drag);
            carousel.removeEventListener('mouseup', endDrag);
            document.removeEventListener('keydown', handleKeydown);
        }
        
        window.addEventListener('beforeunload', cleanup);
    }
})();
</script>


